{"ast":null,"code":"import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport API from \"../../../services/API\";\nimport { toast } from \"react-toastify\";\nexport const userLogin = createAsyncThunk(\"auth/login\", async ({\n  role,\n  email,\n  password\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await API.post(\"/auth/login\", {\n      role,\n      email,\n      password\n    });\n    //store token\n    if (data.success) {\n      alert(data.message);\n      localStorage.setItem(\"token\", data.token);\n      window.location.replace(\"/\");\n    }\n    return data;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\n\n//register\nexport const userRegister = createAsyncThunk(\"auth/register\", async ({\n  name,\n  role,\n  email,\n  password,\n  phone,\n  organisationName,\n  address,\n  hospitalName,\n  website\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await API.post(\"/auth/register\", {\n      name,\n      role,\n      email,\n      password,\n      phone,\n      organisationName,\n      address,\n      hospitalName,\n      website\n    });\n    if (data !== null && data !== void 0 && data.success) {\n      alert(\"User Registerd Successfully\");\n      window.location.replace(\"/login\");\n      // toast.success(\"User Registerd Successfully\");\n    }\n  } catch (error) {\n    console.log(error);\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\n\n//current user\nexport const getCurrentUser = createAsyncThunk(\"auth/getCurrentUser\", async ({\n  rejectWithValue\n}) => {\n  try {\n    const res = await API.get(\"/auth/current-user\");\n    if (res.data) {\n      return res === null || res === void 0 ? void 0 : res.data;\n    }\n  } catch (error) {\n    console.log(error);\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});","map":{"version":3,"names":["createAsyncThunk","API","toast","userLogin","role","email","password","rejectWithValue","data","post","success","alert","message","localStorage","setItem","token","window","location","replace","error","response","userRegister","name","phone","organisationName","address","hospitalName","website","console","log","getCurrentUser","res","get"],"sources":["/Users/armandeepsingh/CHITKARA/7TH SEM/PROJECTS/BLOOD BANK APP/src/redux/features/auth/authActions.js"],"sourcesContent":["import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport API from \"../../../services/API\";\nimport { toast } from \"react-toastify\";\n\nexport const userLogin = createAsyncThunk(\n  \"auth/login\",\n  async ({ role, email, password }, { rejectWithValue }) => {\n    try {\n      const { data } = await API.post(\"/auth/login\", { role, email, password });\n      //store token\n      if (data.success) {\n        alert(data.message);\n        localStorage.setItem(\"token\", data.token);\n        window.location.replace(\"/\");\n      }\n      return data;\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message);\n      } else {\n        return rejectWithValue(error.message);\n      }\n    }\n  }\n);\n\n//register\nexport const userRegister = createAsyncThunk(\n  \"auth/register\",\n  async (\n    {\n      name,\n      role,\n      email,\n      password,\n      phone,\n      organisationName,\n      address,\n      hospitalName,\n      website,\n    },\n    { rejectWithValue }\n  ) => {\n    try {\n      const { data } = await API.post(\"/auth/register\", {\n        name,\n        role,\n        email,\n        password,\n        phone,\n        organisationName,\n        address,\n        hospitalName,\n        website,\n      });\n      if (data?.success) {\n        alert(\"User Registerd Successfully\");\n        window.location.replace(\"/login\");\n        // toast.success(\"User Registerd Successfully\");\n      }\n    } catch (error) {\n      console.log(error);\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message);\n      } else {\n        return rejectWithValue(error.message);\n      }\n    }\n  }\n);\n\n//current user\nexport const getCurrentUser = createAsyncThunk(\n  \"auth/getCurrentUser\",\n  async ({ rejectWithValue }) => {\n    try {\n      const res = await API.get(\"/auth/current-user\");\n      if (res.data) {\n        return res?.data;\n      }\n    } catch (error) {\n      console.log(error);\n      if (error.response && error.response.data.message) {\n        return rejectWithValue(error.response.data.message);\n      } else {\n        return rejectWithValue(error.message);\n      }\n    }\n  }\n);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}